import { IExploit } from "@/types/exploit.type"
import { NextRequest } from "next/server"

export async function GET(request: NextRequest) {
	// get query params
	const query = request.nextUrl.searchParams
	const networkId = query.get('networkId') as string // required
	const limit = query.get('limit')
	const sortBy = query.get('sortBy')
	const order = query.get('order')

	// todo: validate query

	// todo: retrieve exploits from db
	// mock data
	const exploits: IExploit[] = [
		{ id: 1, name: "Arb exploit one idk", network: "arbitrum", date: new Date().toISOString(), amount: 4, },
		{ id: 2, name: "Another arb exploit wtf", network: "arbitrum", date: new Date().toISOString(), amount: 30, },
		{ id: 3, name: "Yet another arb eploit", network: "arbitrum", date: new Date().toISOString(), amount: 69, },
	]

	return Response.json({
		success: true,
		data: exploits
	})
}

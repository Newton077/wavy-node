"use client";

import { Card, CardContent } from "@/components/ui/card";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";

interface Exploit {
  date: string;
  network: string;
  attackVector: string;
  amountLost: string;
  status: "Resolved" | "Ongoing" | "Partially Resolved";
}

const exploits: Exploit[] = [
  {
    date: "2024-03-15",
    network: "Ethereum",
    attackVector: "Smart Contract Vulnerability",
    amountLost: "$5,234,567",
    status: "Resolved",
  },
  {
    date: "2024-03-10",
    network: "Binance Smart Chain",
    attackVector: "Flash Loan Attack",
    amountLost: "$2,789,012",
    status: "Ongoing",
  },
  {
    date: "2024-03-05",
    network: "Polygon",
    attackVector: "Oracle Manipulation",
    amountLost: "$1,456,789",
    status: "Partially Resolved",
  },
  {
    date: "2024-02-28",
    network: "Solana",
    attackVector: "Governance Attack",
    amountLost: "$3,901,234",
    status: "Resolved",
  },
];

export default function LastExploits() {
  return (
    <div className="p-4">
      <div className="max-w-6xl mx-auto space-y-6">
        <h1 className="text-2xl font-medium text-center mb-6">Last Exploit</h1>

        <Card className="border-gray-300 shadow-sm">
          <CardContent className="p-0">
            <Table>
              <TableHeader>
                <TableRow className="hover:bg-transparent border-b border-gray-300">
                  {[
                    "DATE",
                    "NETWORK",
                    "ATTACK VECTOR",
                    "AMOUNT LOST",
                    "STATUS",
                  ].map((header, index) => (
                    <TableHead key={index} className="font-medium text-black">
                      {header}
                    </TableHead>
                  ))}
                </TableRow>
              </TableHeader>
              <TableBody>
                {exploits.map((exploit, index) => (
                  <TableRow key={index} className="hover:bg-gray-50">
                    <TableCell>{exploit.date}</TableCell>
                    <TableCell>{exploit.network}</TableCell>
                    <TableCell>{exploit.attackVector}</TableCell>
                    <TableCell>{exploit.amountLost}</TableCell>
                    <TableCell>
                      <StatusBadge status={exploit.status} />
                    </TableCell>
                  </TableRow>
                ))}
              </TableBody>
            </Table>
          </CardContent>
        </Card>
      </div>
    </div>
  );
}

function StatusBadge({ status }: { status: Exploit["status"] }) {
  const statusStyles = {
    Resolved: "bg-green-100 text-green-800",
    Ongoing: "bg-red-100 text-red-800",
    "Partially Resolved": "bg-yellow-100 text-yellow-800",
  };

  return (
    <span
      className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusStyles[status]}`}
    >
      {status}
    </span>
  );
}
